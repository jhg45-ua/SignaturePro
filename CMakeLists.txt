# ==========================================
# CONFIGURACI√ìN PRINCIPAL DEL PROYECTO
# ==========================================
# Sistema de construcci√≥n CMake para aplicaci√≥n wxWidgets
# Aplicaci√≥n GUI nativa multiplataforma

cmake_minimum_required(VERSION 3.20)  # Versi√≥n m√≠nima de CMake requerida
project(wxWidgets_App)                # Nombre del proyecto

# === CONFIGURACI√ìN DEL EST√ÅNDAR C++ ===
set(CMAKE_CXX_STANDARD 17)            # Usar C++17 para caracter√≠sticas modernas
set(CMAKE_CXX_STANDARD_REQUIRED ON)   # Hacer obligatorio el est√°ndar especificado
set(CMAKE_EXPORT_COMPILE_COMMANDS ON) # Generar compile_commands.json para IDEs

# ==========================================
# B√öSQUEDA Y CONFIGURACI√ìN DE DEPENDENCIAS
# ==========================================

# === SPDLOG (LOGGING) ===
# Buscar spdlog para logging (instalado v√≠a Homebrew)
find_package(PkgConfig REQUIRED)          # PkgConfig necesario para spdlog
pkg_check_modules(SPDLOG REQUIRED spdlog) # Configurar spdlog

# ==========================================
# CONFIGURACI√ìN DE APLICACIONES WXWIDGETS
# ==========================================

# === B√öSQUEDA DE WXWIDGETS ===
# Buscar wxWidgets con componentes core (ventanas, eventos) y base (utilidades)
find_package(wxWidgets REQUIRED COMPONENTS core base)

# Si wxWidgets se encuentra correctamente, proceder con la configuraci√≥n
if(wxWidgets_FOUND)
    # Incluir configuraci√≥n autom√°tica de wxWidgets
    include(${wxWidgets_USE_FILE})
    
    # === CREACI√ìN DE EJECUTABLES ===
    
    # Aplicaci√≥n wxWidgets
    add_executable(app
        src/main.cpp      # Punto de entrada
        src/my_app.cpp           # Clase aplicaci√≥n principal
        src/my_frame.cpp         # Clase frame principal
        src/logger.cpp           # Sistema de logging
    )
    
    # === DIRECTORIOS DE INCLUSI√ìN ===
    # Configurar rutas donde buscar archivos de cabecera (.h/.hpp)
    
    # Directorios para el ejecutable
    set(COMMON_INCLUDE_DIRS
        ${wxWidgets_INCLUDE_DIRS}                        # Headers de wxWidgets
        ${SPDLOG_INCLUDE_DIRS}                          # Headers de spdlog
        src/                                            # Headers locales del proyecto
    )
    
    target_include_directories(app PRIVATE ${COMMON_INCLUDE_DIRS})
    
    # === ENLAZADO DE LIBRER√çAS ===
    # Vincular todas las librer√≠as necesarias al ejecutable
    
    # Librer√≠as necesarias
    set(COMMON_LIBRARIES
        ${wxWidgets_LIBRARIES}  # Librer√≠as de wxWidgets (GUI nativa)
        ${SPDLOG_LIBRARIES}     # spdlog (sistema de logging)
    )
    
    target_link_libraries(app ${COMMON_LIBRARIES})
    
    # === CONFIGURACI√ìN DE SALIDA ===
    # Definir directorio donde se generar√° el ejecutable
    set_target_properties(app PROPERTIES
        RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin  # Ejecutable en /build/bin/
    )
    
    # === CONFIGURACI√ìN DE COMPILACI√ìN ===
    # Aplicar definiciones y flags espec√≠ficos de wxWidgets
    target_compile_definitions(app PRIVATE ${wxWidgets_DEFINITIONS})
    target_compile_options(app PRIVATE ${wxWidgets_CXX_FLAGS})
    
    # === MENSAJE DE CONFIRMACI√ìN ===
    message(STATUS "‚úÖ wxWidgets encontrado - La aplicaci√≥n ser√° construida")
    message(STATUS "   üì¶ app - Aplicaci√≥n wxWidgets")
else()
    # === MENSAJE DE ADVERTENCIA ===
    message(WARNING "‚ö†Ô∏è  wxWidgets no encontrado - La aplicaci√≥n no ser√° construida")
endif()
